let t;const e={qq:/\bm?qqbrowser\/([0-9.]+)/,360:t=>-1!==t.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/,aoyou:/\baoyou/,webview:/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/,firefox:/\bfirefox\/([0-9.ab]+)/,chrome:/ (?:chrome|crios|crmo)\/([0-9.]+)/,ie:/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,android:t=>-1===t.indexOf("android")?"":/\bversion\/([0-9.]+(?: beta)?)/,safari:/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//,opera:/\bopera/,unknow:"unknow"},n={windows:/\bwindows nt ([0-9.]+)/,macosx:/\bmac os x ([0-9._]+)/,linux:"linux",wphone:t=>-1!==t.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==t.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==t.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone",ios:t=>/\bcpu(?: iphone)? os /.test(t)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==t.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/,android:t=>t.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:t.indexOf("adr")>=0?t.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android",unknow:"unknow"},i={weixin:/micromessenger/gi,qqvideo:/qqlivebrowser/gi,qqvideoipad:/qqlivehdbrowser/gi,shouqq:/qq\//gi,qqnews:/qqnews/gi,qzone:/qzone\//gi,unknow:"unknow"},o=(t,e)=>Object.prototype.toString.call(t)===`[object ${e}]`,r=(t,e)=>{const n=c[t.toLowerCase()];for(const t in e){const i=e[t],r=o(i,"Function")?i(s()):i;if(n.name=t,!0===r)break;if("[object String]"===toString(r)){if(-1!==s().indexOf(r))break}else if(o(r,"Object")){if(void 0!==r.version){n.version=r.version;break}}else if(r&&r.exec){const t=r.exec(s());if(t){t.length>=2&&t[1]?n.version=t[1].replace(/_/g,"."):n.version="0.0.0";break}}}return n},s=()=>{if(!t){const e="__",n=navigator.userAgent||"",i=navigator.platform||"",o=navigator.appVersion||"",r=navigator.vendor||"";t=n+e+i+e+o+e+r,t=t.toLowerCase()}return t},a=o=>{t||(r("os",n),r("platform",i),r("browser",e));return"all"===o||"full"===o?s():void 0!==o?c[o].name:`${c.os.name}  _${c.os.version}  ${c.browser.name}  _${c.browser.version}`},c={os:{name:"unknow",version:"0.0.0"},platform:{name:"unknow",version:"0.0.0"},browser:{name:"unknow",version:"0.0.0"}},u=(...t)=>{const e=t[0],n=Array.prototype.slice.call(t,1);for(let t=0;t<n.length;t++){const i=n[t];for(const t in i)e[t]=i[t]}return e},l=t=>{if(!t)return!0;if(!t.length)return!0;let e=0;for(let n=t.length-1;n>0;n--)t[n]||(e+=1);return e>t.length-1},h=t=>{const e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";t=t||9;let n="";for(let i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},p=t=>{try{localStorage&&localStorage.removeItem(t)}catch(t){}},f=t=>0===t.indexOf("csijs_")?t:"csijs_"+t,d=(t,e,n)=>{"object"==typeof e&&(e=n?y(e):(t=>{try{return JSON.stringify(t)}catch(e){return t}})(y(e))),((t,e)=>{try{localStorage&&localStorage.setItem(t,e)}catch(t){}})(f(t),e)},m=(t,e)=>{const n=(t=>localStorage&&localStorage.getItem?localStorage.getItem(t):null)(f(t));return n?e?n:(t=>{try{return JSON.parse(t)}catch(e){return t}})(n):null},v=t=>{p(f(t))},y=t=>{for(const e in t){let n=t[e];if("string"!=typeof n)try{n=n.toString()}catch(t){n=`${n}`}t[e]=n.substr(0,1024)}return t},g=()=>{const t=m("info"),e=[],n=t?t.length:0;if(t&&n){const n=parseInt(t.max,10);for(let i=parseInt(t.min,10);i<=n;i++){const n=`${t.type}_${i}`,o=m(n);e.push(o)}}return e};var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function T(t){var e={exports:{}};return t(e,e.exports),e.exports
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */}var E=w(T((function(t,e){var n;n=function(){return function(){var t={686:function(t,e,n){n.d(e,{default:function(){return x}});var i=n(279),o=n.n(i),r=n(370),s=n.n(r),a=n(817),c=n.n(a);function u(t){try{return document.execCommand(t)}catch(t){return!1}}var l=function(t){var e=c()(t);return u("cut"),e},h=function(t,e){var n=function(t){var e="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[e?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(i,"px"),n.setAttribute("readonly",""),n.value=t,n}(t);e.container.appendChild(n);var i=c()(n);return u("copy"),n.remove(),i},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof t?n=h(t,e):t instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==t?void 0:t.type)?n=h(t.value,e):(n=c()(t),u("copy")),n};function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}var d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action,n=void 0===e?"copy":e,i=t.container,o=t.target,r=t.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==o){if(!o||"object"!==f(o)||1!==o.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&o.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(o.hasAttribute("readonly")||o.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return r?p(r,{container:i}):o?"cut"===n?l(o):p(o,{container:i}):void 0};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t,e){return y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},y(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w(t);if(e){var o=w(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function T(t,e){var n="data-clipboard-".concat(t);if(e.hasAttribute(n))return e.getAttribute(n)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(r,t);var e,n,i,o=g(r);function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=o.call(this)).resolveOptions(e),n.listenClick(t),n}return e=r,n=[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===m(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=s()(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget,n=this.action(e)||"copy",i=d({action:n,container:this.container,target:this.target(e),text:this.text(e)});this.emit(i?"success":"error",{action:n,text:i,trigger:e,clearSelection:function(){e&&e.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(t){return T("action",t)}},{key:"defaultTarget",value:function(t){var e=T("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return T("text",t)}},{key:"destroy",value:function(){this.listener.destroy()}}],i=[{key:"copy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return p(t,e)}},{key:"cut",value:function(t){return l(t)}},{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}],n&&v(e.prototype,n),i&&v(e,i),r}(o()),x=E},828:function(t){if("undefined"!=typeof Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,n){var i=n(828);function o(t,e,n,i,o){var s=r.apply(this,arguments);return t.addEventListener(n,s,o),{destroy:function(){t.removeEventListener(n,s,o)}}}function r(t,e,n,o){return function(n){n.delegateTarget=i(n.target,e),n.delegateTarget&&o.call(t,n)}}t.exports=function(t,e,n,i,r){return"function"==typeof t.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return o(t,e,n,i,r)})))}},879:function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},370:function(t,e,n){var i=n(879),o=n(438);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!i.string(e))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(i.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}(t,e,n);if(i.string(t))return function(t,e,n){return o(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(t){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),o=document.createRange();o.selectNodeContents(t),i.removeAllRanges(),i.addRange(o),e=i.toString()}return e}},279:function(t){function e(){}e.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function o(){i.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,o=n.length;i<o;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],o=[];if(i&&e)for(var r=0,s=i.length;r<s;r++)i[r].fn!==e&&i[r].fn._!==e&&o.push(i[r]);return o.length?n[t]=o:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e}},e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}return n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n(686)}().default},t.exports=n()}))),x=T((function(t){var e,n;e=b,n=function(t){var e=function(t){return new e.lib.init(t)};function n(t,e){return e.offset[t]?isNaN(e.offset[t])?e.offset[t]:e.offset[t]+"px":"0px"}function i(t,e){return!(!t||"string"!=typeof e||!(t.className&&t.className.trim().split(/\s+/gi).indexOf(e)>-1))}return e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,style:{background:""}},e.lib=e.prototype={toastify:"1.11.2",constructor:e,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||e.defaults.text,this.options.node=t.node||e.defaults.node,this.options.duration=0===t.duration?0:t.duration||e.defaults.duration,this.options.selector=t.selector||e.defaults.selector,this.options.callback=t.callback||e.defaults.callback,this.options.destination=t.destination||e.defaults.destination,this.options.newWindow=t.newWindow||e.defaults.newWindow,this.options.close=t.close||e.defaults.close,this.options.gravity="bottom"===t.gravity?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=t.positionLeft||e.defaults.positionLeft,this.options.position=t.position||e.defaults.position,this.options.backgroundColor=t.backgroundColor||e.defaults.backgroundColor,this.options.avatar=t.avatar||e.defaults.avatar,this.options.className=t.className||e.defaults.className,this.options.stopOnFocus=void 0===t.stopOnFocus?e.defaults.stopOnFocus:t.stopOnFocus,this.options.onClick=t.onClick||e.defaults.onClick,this.options.offset=t.offset||e.defaults.offset,this.options.escapeMarkup=void 0!==t.escapeMarkup?t.escapeMarkup:e.defaults.escapeMarkup,this.options.style=t.style||e.defaults.style,t.backgroundColor&&(this.options.style.background=t.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var t=document.createElement("div");for(var e in t.className="toastify on "+this.options.className,this.options.position?t.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(t.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):t.className+=" toastify-right",t.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)t.style[e]=this.options.style[e];if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)t.appendChild(this.options.node);else if(this.options.escapeMarkup?t.innerText=this.options.text:t.innerHTML=this.options.text,""!==this.options.avatar){var i=document.createElement("img");i.src=this.options.avatar,i.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?t.appendChild(i):t.insertAdjacentElement("afterbegin",i)}if(!0===this.options.close){var o=document.createElement("span");o.innerHTML="&#10006;",o.className="toast-close",o.addEventListener("click",function(t){t.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var r=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&r>360?t.insertAdjacentElement("afterbegin",o):t.appendChild(o)}if(this.options.stopOnFocus&&this.options.duration>0){var s=this;t.addEventListener("mouseover",(function(e){window.clearTimeout(t.timeOutValue)})),t.addEventListener("mouseleave",(function(){t.timeOutValue=window.setTimeout((function(){s.removeElement(t)}),s.options.duration)}))}if(void 0!==this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var a=n("x",this.options),c=n("y",this.options),u="left"==this.options.position?a:"-"+a,l="toastify-top"==this.options.gravity?c:"-"+c;t.style.transform="translate("+u+","+l+")"}return t},showToast:function(){var t;if(this.toastElement=this.buildToast(),!(t="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var n=e.defaults.oldestFirst?t.firstChild:t.lastChild;return t.insertBefore(this.toastElement,n),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),e.reposition()}.bind(this),400)}},e.reposition=function(){for(var t,e={top:15,bottom:15},n={top:15,bottom:15},o={top:15,bottom:15},r=document.getElementsByClassName("toastify"),s=0;s<r.length;s++){t=!0===i(r[s],"toastify-top")?"toastify-top":"toastify-bottom";var a=r[s].offsetHeight;t=t.substr(9,t.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(r[s].style[t]=o[t]+"px",o[t]+=a+15):!0===i(r[s],"toastify-left")?(r[s].style[t]=e[t]+"px",e[t]+=a+15):(r[s].style[t]=n[t]+"px",n[t]+=a+15)}return this},e.lib.init.prototype=e.lib,e},t.exports?t.exports=n():e.Toastify=n()}));function S(t){const e=document.createElement("a");return e.className="mara-copy-situ",e.innerText=t,e.style.width="120px",e.style.height="40px",e.style.backgroundColor="#0064CD",e.style.color="#fff",e.style.lineHeight="40px",e.style.cursor="pointer",e.style.textAlign="center",e.style.borderRadius="20px",e}function C(t){const e=document.createElement("td");return e.style.border="1px solid #0064CD",e.style.padding="5px 5px 5px 10px",e.style.wordWrap="break-word",e.innerHTML=t,e}function k(t,e){const n=document.createElement(t);for(const t in e)n.style[t]=e[t];return n}function O(t){this.page=null,this.blackBg=null,this.table=null,this.appended=!1,this.canReport=!0,this.csiReport=t}O.prototype.createPage=function(){this.page=this.page||k("div",{zIndex:9999,position:"fixed",top:"0",left:"0",width:"100%",height:"100%",fontSize:"10px"}),this.blackBg=this.blackBg||k("div",{zIndex:0,position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.6)"}),this.title=this.title||k("div",{zIndex:2,position:"absolute",width:"400px",left:"50%",top:"30px",fontSize:"26px",color:"#000",textAlign:"center",marginLeft:"-200px"}),this.container=this.container||k("div",{zIndex:1,position:"absolute",width:"80%",height:"60vh",top:"30px",marginLeft:"10%"}),this.tableCon=this.tableCon||k("div",{height:"100%",border:"12px solid #0064CD",backgroundColor:"#fff",overflowY:"scroll"}),this.table=this.table||k("table",{color:"#333333",width:"100%",borderCollapse:"collapse",tableLayout:"fixed"}),this.btnCon=this.btnCon||k("div",{margin:"20px auto",width:"100%",display:"block",overflow:"hidden"}),this.btn1||(this.btn1=S("复制"),this.btn1.style.display="block",this.btn1.style.margin="0 auto",this.btn1.style.float="left"),this.btn2||(this.btn2=S("关闭"),this.btn2.style.float="right"),this.page.append(this.blackBg),this.page.append(this.container),this.page.append(this.title),this.container.append(this.tableCon),this.tableCon.append(this.table),this.container.append(this.btnCon),this.btnCon.append(this.btn1),this.btnCon.append(this.btn2),setTimeout((()=>{this.addEventListener()}),300)},O.prototype.addEventListener=function(){this.addEvented||(this.blackBg.addEventListener("click",(()=>{this.remove()})),this.btn1.addEventListener("click",(()=>{const t=g().map((t=>({msg:t.msg,js:t.js}))).reduce(((t,e)=>{const n=Object.entries(e).reduce(((t,e)=>t+`[${e[0]}] ===> :`+e[1]+";\t"),"");return t+n+"\n"}),"");this.btn1.setAttribute("data-clipboard-text",t);new E(".mara-copy-situ").on("success",(function(t){x({text:"复制成功",duration:1e3,gravity:"bottom",position:"center",style:{position:"fixed",margin:"0 auto",left:0,right:0,width:"80px",textAlign:"center",background:"black",zIndex:"999999",padding:"5px",opacity:.8,borderRadius:"5px",color:"white"}}).showToast(),t.clearSelection()}))})),this.btn2.addEventListener("click",(()=>{this.remove()})),this.addEvented=!0)},O.prototype.fillContent=function(){const t=g();if(l(t)){const t=k("div",{width:"100%",position:"absolute",top:"100px",textAlign:"center",fontSize:"24px"});t.innerText="暂时没有错误信息",this.table.append(t)}else for(let e=t.length-1;e>=0;e--){const n=t[e];if(!n)continue;const i=k("tr",{border:"1px solid #0064CD"}),o=C(n.etype),r=C(n.js),s=C(n.msg);s.style.color="#ff0000",i.append(o),i.append(r),i.append(s),this.table.append(i)}},O.prototype.addTitle=function(){const t=k("tr",{height:"35px",textAlign:"center",backgroundColor:"#ccc"}),e=document.createElement("td");e.append(document.createTextNode("type"));const n=document.createElement("td");n.append(document.createTextNode("js"));const i=document.createElement("td");i.append(document.createTextNode("msg")),t.append(e),t.append(n),t.append(i),this.table.append(t)},O.prototype.appendTo=function(){this.createPage(),this.table.innerHTML="",this.addTitle(),this.fillContent(),this.appended=!0,document.body.append(this.page)},O.prototype.remove=function(){this.appended=!1,this.page.remove()},O.prototype.toggleShow=function(){this.appended?this.remove():this.appendTo()};
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
var _=T((function(t){!function(e,n,i,o){var r,s=["","webkit","Moz","MS","ms","o"],a=n.createElement("div"),c=Math.round,u=Math.abs,l=Date.now;function h(t,e,n){return setTimeout(g(t,n),e)}function p(t,e,n){return!!Array.isArray(t)&&(f(t,n[e],n),!0)}function f(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==o)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function d(t,n,i){var o="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=e.console&&(e.console.warn||e.console.log);return r&&r.call(e.console,o,i),t.apply(this,arguments)}}r="function"!=typeof Object.assign?function(t){if(t===o||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==o&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var m=d((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&t[i[r]]===o)&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),v=d((function(t,e){return m(t,e,!0)}),"merge","Use `assign`.");function y(t,e,n){var i,o=e.prototype;(i=t.prototype=Object.create(o)).constructor=t,i._super=o,n&&r(i,n)}function g(t,e){return function(){return t.apply(e,arguments)}}function b(t,e){return"function"==typeof t?t.apply(e&&e[0]||o,e):t}function w(t,e){return t===o?e:t}function T(t,e,n){f(C(e),(function(e){t.addEventListener(e,n,!1)}))}function E(t,e,n){f(C(e),(function(e){t.removeEventListener(e,n,!1)}))}function x(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function C(t){return t.trim().split(/\s+/g)}function k(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function O(t){return Array.prototype.slice.call(t,0)}function _(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];k(o,s)<0&&i.push(t[r]),o[r]=s,r++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}function A(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((i=(n=s[a])?n+r:e)in t)return i;a++}return o}var L=1;function I(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var R="ontouchstart"in e,N=A(e,"PointerEvent")!==o,P=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),M="touch",j="mouse",q=24,D=["x","y"],z=["clientX","clientY"];function F(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&n.handler(e)},this.init()}function H(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,s=1&e&&i-r==0,a=12&e&&i-r==0;n.isFirst=!!s,n.isFinal=!!a,s&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=X(e));r>1&&!n.firstMultiple?n.firstMultiple=X(e):1===r&&(n.firstMultiple=!1);var s=n.firstInput,a=n.firstMultiple,c=a?a.center:s.center,h=e.center=Y(i);e.timeStamp=l(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=U(c,h),e.distance=V(c,h),function(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};1!==e.eventType&&4!==r.eventType||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y});e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}(n,e),e.offsetDirection=$(e.deltaX,e.deltaY);var p=W(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=u(p.x)>u(p.y)?p.x:p.y,e.scale=a?(f=a.pointers,d=i,V(d[0],d[1],z)/V(f[0],f[1],z)):1,e.rotation=a?function(t,e){return U(e[1],e[0],z)+U(t[1],t[0],z)}(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,s,a=t.lastInterval||e,c=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(c>25||a.velocity===o)){var l=e.deltaX-a.deltaX,h=e.deltaY-a.deltaY,p=W(c,l,h);i=p.x,r=p.y,n=u(p.x)>u(p.y)?p.x:p.y,s=$(l,h),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,s=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=s}(n,e);var f,d;var m=t.element;x(e.srcEvent.target,m)&&(m=e.srcEvent.target);e.target=m}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function X(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:c(t.pointers[n].clientX),clientY:c(t.pointers[n].clientY)},n++;return{timeStamp:l(),pointers:e,center:Y(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Y(t){var e=t.length;if(1===e)return{x:c(t[0].clientX),y:c(t[0].clientY)};for(var n=0,i=0,o=0;o<e;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:c(n/e),y:c(i/e)}}function W(t,e,n){return{x:e/t||0,y:n/t||0}}function $(t,e){return t===e?1:u(t)>=u(e)?t<0?2:4:e<0?8:16}function V(t,e,n){n||(n=D);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function U(t,e,n){n||(n=D);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}F.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(I(this.element),this.evWin,this.domHandler)}};var B={mousedown:1,mousemove:2,mouseup:4},J="mousedown",G="mousemove mouseup";function Z(){this.evEl=J,this.evWin=G,this.pressed=!1,F.apply(this,arguments)}y(Z,F,{handler:function(t){var e=B[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t}))}});var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Q={2:M,3:"pen",4:j,5:"kinect"},tt="pointerdown",et="pointermove pointerup pointercancel";function nt(){this.evEl=tt,this.evWin=et,F.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(tt="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel"),y(nt,F,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=K[i],r=Q[t.pointerType]||t.pointerType,s=r==M,a=k(e,t.pointerId,"pointerId");1&o&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&o&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var it={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ot="touchstart",rt="touchstart touchmove touchend touchcancel";function st(){this.evTarget=ot,this.evWin=rt,this.started=!1,F.apply(this,arguments)}function at(t,e){var n=O(t.touches),i=O(t.changedTouches);return 12&e&&(n=_(n.concat(i),"identifier",!0)),[n,i]}y(st,F,{handler:function(t){var e=it[t.type];if(1===e&&(this.started=!0),this.started){var n=at.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:M,srcEvent:t})}}});var ct={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ut="touchstart touchmove touchend touchcancel";function lt(){this.evTarget=ut,this.targetIds={},F.apply(this,arguments)}function ht(t,e){var n=O(t.touches),i=this.targetIds;if(3&e&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=O(t.changedTouches),a=[],c=this.target;if(r=n.filter((function(t){return x(t.target,c)})),1===e)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),12&e&&delete i[s[o].identifier],o++;return a.length?[_(r.concat(a),"identifier",!0),a]:void 0}y(lt,F,{handler:function(t){var e=ct[t.type],n=ht.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:M,srcEvent:t})}});function pt(){F.apply(this,arguments);var t=g(this.handler,this);this.touch=new lt(this.manager,t),this.mouse=new Z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function ft(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,dt.call(this,e)):12&t&&dt.call(this,e)}function dt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),2500)}}function mt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(e-o.x),s=Math.abs(n-o.y);if(r<=25&&s<=25)return!0}return!1}y(pt,F,{handler:function(t,e,n){var i=n.pointerType==M,o=n.pointerType==j;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)ft.call(this,e,n);else if(o&&mt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=A(a.style,"touchAction"),yt=vt!==o,gt="compute",bt="auto",wt="manipulation",Tt="none",Et="pan-x",xt="pan-y",St=function(){if(!yt)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!n||e.CSS.supports("touch-action",i)})),t}();function Ct(t,e){this.manager=t,this.set(e)}Ct.prototype={set:function(t){t==gt&&(t=this.compute()),yt&&this.manager.element.style&&St[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return f(this.manager.recognizers,(function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(S(t,Tt))return Tt;var e=S(t,Et),n=S(t,xt);if(e&&n)return Tt;if(e||n)return e?Et:xt;if(S(t,wt))return wt;return bt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,o=S(i,Tt)&&!St.none,r=S(i,xt)&&!St["pan-y"],s=S(i,Et)&&!St["pan-x"];if(o){var a=1===t.pointers.length,c=t.distance<2,u=t.deltaTime<250;if(a&&c&&u)return}if(!s||!r)return o||r&&6&n||s&&n&q?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var kt=32;function Ot(t){this.options=r({},this.defaults,t||{}),this.id=L++,this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function _t(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function At(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Lt(t,e){var n=e.manager;return n?n.get(t):t}function It(){Ot.apply(this,arguments)}function Rt(){It.apply(this,arguments),this.pX=null,this.pY=null}function Nt(){It.apply(this,arguments)}function Pt(){Ot.apply(this,arguments),this._timer=null,this._input=null}function Mt(){It.apply(this,arguments)}function jt(){It.apply(this,arguments)}function qt(){Ot.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Dt(t,e){return(e=e||{}).recognizers=w(e.recognizers,Dt.defaults.preset),new zt(t,e)}Ot.prototype={defaults:{},set:function(t){return r(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(p(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Lt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return p(t,"dropRecognizeWith",this)||(t=Lt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(p(t,"requireFailure",this))return this;var e=this.requireFail;return-1===k(e,t=Lt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(p(t,"dropRequireFailure",this))return this;t=Lt(t,this);var e=k(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+_t(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+_t(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=kt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=r({},t);if(!b(this.options.enable,[this,e]))return this.reset(),void(this.state=kt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},y(It,Ot,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=6&e,o=this.attrTest(t);return i&&(8&n||!o)?16|e:i||o?4&n?8|e:2&e?4|e:2:kt}}),y(Rt,It,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(xt),t&q&&e.push(Et),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(6&e.direction?(o=0===r?1:r<0?2:4,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?1:s<0?8:16,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return It.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=At(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),y(Nt,It,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Tt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),y(Pt,Ot,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[bt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=h((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return kt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}}),y(Mt,It,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Tt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),y(jt,It,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:n&q&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&u(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=At(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),y(qt,Ot,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&o&&n){if(4!=t.eventType)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||V(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=h((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return kt},failTimeout:function(){return this._timer=h((function(){this.state=kt}),this.options.interval,this),kt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Dt.VERSION="2.0.7",Dt.defaults={domEvents:!1,touchAction:gt,enable:!0,inputTarget:null,inputClass:null,preset:[[Mt,{enable:!1}],[Nt,{enable:!1},["rotate"]],[jt,{direction:6}],[Rt,{direction:6},["swipe"]],[qt],[qt,{event:"doubletap",taps:2},["tap"]],[Pt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function zt(t,e){var n;this.options=r({},Dt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(N?nt:P?lt:R?pt:Z))(n,H),this.touchAction=new Ct(this,this.options.touchAction),Ft(this,!0),f(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Ft(t,e){var n,i=t.element;i.style&&(f(t.options.cssProps,(function(o,r){n=A(i.style,r),e?(t.oldCssProps[n]=i.style[n],i.style[n]=o):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}zt.prototype={set:function(t){return r(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,o=e.curRecognizer;(!o||o&&8&o.state)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&14&n.state&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof Ot)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(p(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(p(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=k(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==o&&e!==o){var n=this.handlers;return f(C(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==o){var n=this.handlers;return f(C(t),(function(t){e?n[t]&&n[t].splice(k(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=n.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<i.length;)i[o](e),o++}},destroy:function(){this.element&&Ft(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r(Dt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:kt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:q,DIRECTION_ALL:30,Manager:zt,Input:F,TouchAction:Ct,TouchInput:lt,MouseInput:Z,PointerEventInput:nt,TouchMouseInput:pt,SingleTouchInput:st,Recognizer:Ot,AttrRecognizer:It,Tap:qt,Pan:Rt,Swipe:jt,Pinch:Nt,Rotate:Mt,Press:Pt,on:T,off:E,each:f,merge:v,extend:m,assign:r,inherit:y,bindFn:g,prefixed:A}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Dt,t.exports?t.exports=Dt:e.Hammer=Dt}(window,document)}));function A(t){this.csi=t}A.prototype={init(){const t=new O(this.csi.report.bind(this.csi));var e=new _.Manager(document.querySelector("html")),n=new _.Tap({event:"quadrupletap",taps:4});e.add(n),e.on("quadrupletap",(function(e){t.toggleShow()})),document.addEventListener("keydown",(e=>{(e=e||window.event).ctrlKey&&6===parseInt(e.key,10)&&t.toggleShow()}))}};const L=(t,e,n,i)=>(t.addLine("ERROR",{etype:"win error",msg:e,js:`${n} : ${i}`}),!0),I=function(t){this.forms=t};I.prototype.probe=function(){const{onerror:t}=window;window.onerror=(...e)=>{"function"==typeof t&&t.apply(this,e),L(this.forms,e[0],e[1],e[2])},window.onunhandledrejection=(...e)=>{"function"==typeof t&&t.apply(this,e),L(this.forms,e[0],e[1],e[2])}};let R=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_"),"");const N={},P=function(t){this.forms=t},M=(t,e,n)=>{t.addLine("ERROR",{etype:"ajax error",msg:`status:${e}`,js:n.join(" :")})};P.prototype.probe=function(){const t=this,{open:e,send:n}=XMLHttpRequest.prototype;XMLHttpRequest.prototype.open=function(){const n=R();this.__xhrid=n,t.addListener(this,arguments),e.apply(this,arguments)},XMLHttpRequest.prototype.setRequestHeader=function(){const[t,e]=[...arguments];"content-type"===t.toLowerCase()&&"application/json"===e.toLowerCase()&&(N[this.__xhrid].recordPayload=!0)},XMLHttpRequest.prototype.send=function(){N[this.__xhrid].recordPayload&&(N[this.__xhrid].payload=[...arguments]),n.apply(this,arguments)}},P.prototype.addListener=function(t,e){if(N[t.__xhrid])return;N[t.__xhrid]={xhr:t};const{ontimeout:n}=t;t.addEventListener("loadend",(()=>{const n=N[t.__xhrid].payload||{},i=`${t.status}`,o={status:i,payload:n,response:t.response};/^2[0-9]{1,3}/gi.test(i)||"0"===i?((t,e,n)=>{t.addLine("AJAXTRACE",{etype:"ajax trace",msg:`status:${e}`,js:n.join(" :")})})(this.forms,JSON.stringify(o),[...e]):M(this.forms,JSON.stringify(o),[...e])})),t.addEventListener("error",(()=>{M(this.forms,t.status||"networkError",[...e])})),t.ontimeout=(...i)=>{this.forms.addLine("ERROR",{etype:"ajax error",msg:`timeout ${t.status}`,js:e.join(" :")}),n&&n.apply(this,i)}};const j=function(t){this.forms=t};j.prototype.probe=function(){if(!window.fetch)return;const t=window.fetch;window.fetch=(e,n)=>{let i="GET",o=e||"";return"string"==typeof e?i=n&&n.method?n.method:i:"[object Request]"===Object.prototype.toString.call(e)&&(i=e.method||i,o=e.url||""),t(e,n).then((t=>{const e=`${t.status}`;return/^2[0-9]{1,3}/gi.test(e)||0==+e||this.forms.addLine("ERROR",{etype:"fetch error",msg:`status:${t.status}`,js:`${i} :${o}`}),t})).catch((t=>{let e;try{e=t&&t.message?t.message:JSON.stringify(t)}catch(n){e=t&&t.message?t.message:t}throw this.forms.addLine("ERROR",{etype:"fetch error",msg:e,js:`${i} :${o}`}),t}))}};const q=function(){this.fid="",this.uid="",this.min=0,this.max=0,this.type="",this.length=""},D=function(){this.pid="",this.index="",this.time="",this.ua="",this.etype="",this.msg="",this.url="",this.other=""},z=function(t,e){const n={feid:t,uid:h(),min:0,max:0,type:e,length:0};this.info=u(new q,n,m("info")),this.line=new D};z.prototype={addLine(t){const e={pid:h(6),index:parseInt(this.info.max,10)+1,time:Date.now(),ua:a()};(t=>{for(const e in t)t[e]=""})(this.line),u(this.line,e,t);const n=`${this.info.type}_${this.line.index}`;d(n,this.line),this.updateInfo(this.line)},updateInfo(t){const e=parseInt(t.index,10);let n=parseInt(this.info.min,10);n=n||e;let i=e-n+1;if(i>45){const t=i-45;for(let e=0;e<t;e++){const t=`${this.info.type}_${n+e}`;v(t)}i=45}this.info.length=i,this.info.min=e-i+1,this.info.max=e,d("info",this.info)}};const F=function(t){this.norTable=new z(t,"nor"),this.errTable=new z(t,"err")};F.prototype={addLine(t,e){const n=this.errTable;setTimeout((()=>{n.addLine(e)}),0)}};const H=()=>{a();const{browser:t}=c,{name:e}=t,n=parseFloat(t.version);return"ie"===e&&n<9};class X{constructor(t={}){this.inited=!1,this.checkParams(t),this.init(t)}checkParams(t){if(!t.feID)throw Error("feID必传");if(!t.report||"function"!=typeof t.report)throw Error("请填写自定义上报函数")}init(t){if(!this.inited&&!H())try{(()=>{for(let t in localStorage)t.indexOf("csijs_")>-1&&p(t)})(),this.opts=t;const e=new F(t.feID);new A(this).init(),new I(e).probe(),new P(e).probe(),new j(e).probe(),this.inited=!0}catch(t){console.log(t)}}probe(t){H()||this.forms.addLine("ERROR",{etype:"custom error",msg:t})}report(){if(H())return;const t=g();l(t)||this.opts.report(t)}}export{X as default};
